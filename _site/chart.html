<html>
  <head>
    <meta content='text/html;charset=UTF-8' http-equiv='Content-Type'>
    <title>GeoIQ &mdash; Chart API</title>
    <style type='text/css'>
      @import '/api/css/default.css';
      @import '/api/css/syntax.css';
    </style>
    <style media='print' type='text/css'>
      @import '/api/css/print.css';
    </style>
    <meta content='GeoIQ API' name='subject'>
    <link href='/api/images/favicon.png' rel='shortcut icon'>
  </head>
  <body>
    <div id='wrap'>
      <div id='header'>
        <a href='http://fortiusone.github.com/api' title="GeoIQ API"></a>
        <div class='tagline'>GeoIQ API</div>
      </div>
      <div id='pages'>
        <ol class='toc'>
          <li>Start Here
            <ol class="toc">
              <li><a href='/api/index.html'>Welcome</a></li>
              <li><a href='/api/tutorial.html'>Quick Start</a></li>
              <li><a href='http://getsatisfaction.com/geocommons'>Get Help</a></li>
              <li><a href='http://developer.geoiq.com/blog/'>Blog</a></li>
            </ol>
          </li>
          <li>REST API
            <ol class="toc">
              <li><a href='/api/methods.html'>Methods</a></li>
              </ol>
            </li>
            <li>Datasets
              <ol class="toc">
                <li><a href="/api/datasets/create.html">datasets.create</a></li>
                <li><a href="/api/datasets/retrieve.html">datasets.retrieve</a></li>
                <li><a href="/api/datasets/delete.html">datasets.delete</a></li>
                <li><a href="/api/datasets/update.html">datasets.update</a></li>
                <li><a href="/api/datasets/update.html">datasets.update_feed</a></li>
              </ol>
            </li>
            <li>Features
              <ol class="toc">
              <li><a href="/api/features/retrieve.html">GET /dataset/:id/features</a></li>
              <li><a href="/api/features/create.html">POST /dataset/:id/features</a></li>
              <li><a href="/api/features/delete.html">DELETE /dataset/:id/features</a></li>
              <li><a href="/api/features/aggregate.html">features.aggregate</a></li>
              </ol>
            </li>
            <li>Maps
              <ol class="toc">
              <li><a href="/api/maps/download.html">maps.download</a></li>
              <li><a href="/api/maps/create.html">maps.create</a></li>
              <li><a href="/api/maps/update.html">maps.update</a></li>
              <li><a href="/api/maps/delete.html">maps.delete</a></li>
              <li><a href="/api/maps/addLayer.html">maps.addLayer</a></li>
              <li><a href="/api/maps/deleteLayer.html">maps.deleteLayer</a></li>
              </ol>
            </li>
            <li>Search
              <ol class="toc">
              <li><a href="/api/search.html">search</a></li>
              </ol>
            </li>
            <li>Users
              <ol class="toc">
              <li><a href="/api/users.html">users.createUser</a></li>
              <li><a href="/api/users.html">users.updateUser</a></li>
              <li><a href="/api/users.html">users.deleteUser</a></li>
              <li><a href="/api/users.html">users.getInfo</a></li>
              </ol>
            </li>
            <li>Groups
              <ol class="toc">
              <li><a href="/api/groups.html">groups.createGroup</a></li>
              <li><a href="/api/groups.html">groups.addUser</a></li>
              <li><a href="/api/groups.html">groups.deleteGroup</a></li>
              <li><a href="/api/groups.html">groups.getUsers</a></li>
              <li><a href="/api/permissions.html">permissions.set</a></li>
              </ol>
            </li>
            <li>Analysis
              <ol class="toc">
              <li><a href="/api/analysis.html">Analysis</a></li>
              </ol>
            </li>
          <li><a href="/api/javascript.html">JavaScript API</a>
            <ol class="toc">
              <li><a href="/api/javascript/methods.html">Javascript Methods</a></li>
              <li><a href="/api/javascript/methods.html">Charts</a></li>
            </ol>
          </li>          
          <li>SDK &amp; Tools
            <ol class="toc">
              <li><a href="/api/javascript.html">Javascript</a></li>
              <li><a href="/api/javascript/methods.html">Javascript Methods</a></li>
            </ol>
          </li>          
          <li>Examples
            <ol class="toc">
              <li><a href='/api/examples/dashboard.html'>Dashboard Example</a></li>
              <li><a href='/api/examples/map.html'>Map Example</a></li>
              <li><a href='/api/examples/map_drawing.html'>Map Drawing Example</a></li>
              <li><a href='/api/examples/editing_features.html'>Editing Features Example</a></li>
              <li><a href='/api/examples/map_search'>Map Search Example</a></li>
            </ol>
          </li>
        </ol>
      </div>
      <div id='content'>
        <h1 id='chart api'>Chart API</h1>
        <p>This is <strong><span class="caps">INTERNAL</span></strong> documentation on our unofficial Chart <span class="caps">API</span>. This works with the current, 1.7.0 version of charts. There are potential inconsistencies between calling for Features from Finder vs. from the Flash, so for now be careful. We can smooth it out to be consistent soon.</p>
<h2>Table Grid</h2>
<p>Method: F1.Visualizer.charts.grid(height, width, data, dom_id);</p>
<p>Example:</p>
<pre><code class="javascript">
F1.Visualizer.utils.get_data_from_flash("14", function(data) {
    var features = jq.map(data.features, function(feature) { 
    if (feature) { 
    return feature.attributes} });

    data.features = features;
    F1.Visualizer.charts.grid(600, "100%", data, "projects-table");
 }, map);
</code></pre>
<h2>Bar Chart</h2>
<p>Method: F1.Visualizer.charts.bar(height, width, bar_options, dom_id);</p>
<p>Example:</p>
<p><img src="Bar_Chart.png" alt="" /></p>
<pre><code class="javascript">
 F1.Visualizer.utils.get_data_from_flash("14", function(data) {
    var features = jq.map(data.features, function(feature) { 
      if (feature) { 
         return feature.attributes} 
      });

    data.features = features;

    bar_options = {"features":features, "attributes": {"data":{"name": "Number of Projects", "original_name": "projects0"}, "description":{"name": "Commune", "original_name": "commune0"}, "sort":{"name": "Number of Projects","original_name": "projects0"} } };
    F1.Visualizer.charts.bar(180, 455, bar_options, "graphael-graph-1");
  }, map);
</code></pre>
<h2>Pie Chart</h2>
<p>Method: F1.Visualizer.charts.pie(height, width, options, dom_id);</p>
<p>Example:</p>
<p><img src="Pie_Chart.png" alt="" /></p>
<pre><code class="javascript">
 F1.Visualizer.utils.get_data_from_flash("14", function(data) {
    var features = jq.map(data.features, function(feature) { 
      if (feature) { 
      return feature.attributes} });

    data.features = features;
    // F1.Visualizer.charts.grid(600, "100%", data, "projects-table");

    pie_options = {"features":features, "attributes": {"data":{"name": "Number of Projects","original_name": "projects0"}, "description":{"name": "Commune","original_name": "commune0"}, "sort":{"name": "Number of Projects","original_name": "projects0"} } };
    F1.Visualizer.charts.pie(180, 455, pie_options, "graphael-graph-2");

  }, map);
</code></pre>
<h2>Scatterplot</h2>
<p>Method: F1.Visualizer.charts.scatterplot(height, width, options, dom_id);</p>
<p>Example:</p>
<p><img src="Scatterplot.png" alt="" /></p>
<pre><code class="javascript">
 F1.Visualizer.utils.get_data_from_flash("14", function(data) {
    var features = jq.map(data.features, function(feature) { 
      if (feature) { 
      return feature.attributes} });

    data.features = features;

    pie_options = {"features":features, "attributes": {"data":{"name": "Number of Projects","original_name": "projects0"}, "description":{"name": "Commune","original_name": "commune0"}, "sort":{"name": "Number of Projects","original_name": "projects0"} } };
    F1.Visualizer.charts.scatterplot(180, 455, pie_options, "graphael-graph-3");

  }, map);
</code></pre>
<h2>Line Chart</h2>
<p>Method: F1.Visualizer.charts.line(height, width, options, dom_id);</p>
<p>Example:</p>
<p><img src="Line_Chart.png" alt="" /></p>
<pre><code class="javascript">
 F1.Visualizer.utils.get_data_from_flash("14", function(data) {
    var features = jq.map(data.features, function(feature) { 
      if (feature) { 
      return feature.attributes} });

    data.features = features;

    pie_options = {"features":features, "attributes": {"data":{"name": "Number of Projects","original_name": "projects0"}, "description":{"name": "Commune","original_name": "commune0"}, "sort":{"name": "Number of Projects","original_name": "projects0"} } };
    F1.Visualizer.charts.line(180, 455, pie_options, "graphael-graph-5");

  }, map);
</code></pre>
<h2>Area Chart</h2>
<p>Method: F1.Visualizer.charts.area(height, width, options, dom_id);</p>
<p>Example:</p>
<p><img src="Area_Chart.png" alt="" /></p>
<pre><code class="javascript">
 F1.Visualizer.utils.get_data_from_flash("14", function(data) {
    var features = jq.map(data.features, function(feature) { 
      if (feature) { 
      return feature.attributes} });

    data.features = features

    pie_options = {"features":features, "attributes": {"data":{"name": "Number of Projects","original_name": "projects0"}, "description":{"name": "Commune","original_name": "commune0"}, "sort":{"name": "Number of Projects","original_name": "projects0"} } };
    F1.Visualizer.charts.area(180, 455, pie_options, "graphael-graph-4");

  }, map);
</code></pre>
<h2>get_data_from_flash</h2>
<p>F1.Visualizer.utils.get_data_from_flash(dataset_id, callback_function, map_object)</p>
<pre><code class="javascript">
 F1.Visualizer.utils.get_data_from_flash("14", function(data) {
    var total_projects = 0;
    var total_clusters = 9; // todo - clusters weren't included in the aggregation    
    var features = jq.map(data.features, function(feature) { 
      if (feature) { 
        if(feature.attributes[filter] == filter_value) {
        total_projects += feature.attributes["projects0"];
      }
      return feature.attributes} });

      jq('.summary').html(total_projects + " projects &lt;span class='small-text'&gt;covering&lt;/span&gt;&lt;br /&gt;" + total_clusters + " clusters");
  }, map);
</code></pre>
      </div>
      <div id='footer'>Copyright &copy; 2008-2011 GeoIQ</div>
    </div>
  </body>
</html>
